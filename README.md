# Collaborative AI Toy

Toy project to teach best practices in collaborative, high-quality, and reproducible AI software development.

## Directory Structure

```plaintext
├── .devcontainer                  <- Directory for Visual Studio Code Dev Container configuration.
│   └── devcontainer.json          <- Configuration file for defining the development container.
├── .github                        <- Directory for GitHub-specific configuration and metadata.
│   ├── CODEOWNERS                 <- File to define code owners for the repository.
│   ├── CONTRIBUTING.md            <- Guidelines for contributing to the project.
│   └── pull_request_template.md.  <- Template for pull requests to standardize and improve PR quality.
├── .vscode                        <- Directory for Visual Studio Code-specific configuration files.
│   ├── cspell.json                <- Configuration file for the Code Spell Checker extension.
│   ├── dictionaries               <- Directory for custom dictionary files.
│   │   └── data-science-en.txt    <- Custom dictionary for data science terminology.
│   ├── extensions.json            <- Recommended extensions for the project.
│   └── settings.json              <- Workspace-specific settings for Visual Studio Code.
├── config                         <- Configuration files for the project.
├── data                           <- Data for the project, divided into different stages of data processing.
│   ├── raw                        <- Original, immutable data dump.
│   ├── external                   <- Data from third-party sources.
│   ├── interim                    <- Intermediate data, partially processed.
│   ├── processed                  <- Fully processed data, ready for analysis.
│   └── features                   <- Engineered features ready for model training.
├── docs                           <- Documentation for the project.
│   ├── api-reference.md           <- API reference documentation.
│   ├── explanation.md             <- Detailed explanations and conceptual documentation.
│   ├── how-to-guides.md           <- Step-by-step guides on performing common tasks.
│   ├── index.md                   <- The main documentation index page.
│   └── tutorials.md               <- Tutorials related to the project.
├── log                            <- Logs generated by the project.
├── models                         <- Machine learning models, scripts, and other related artifacts.
├── notebooks                      <- Jupyter notebooks for experiments, examples, or data analysis.
├── scripts                        <- Directory for project-specific scripts and utilities.
│   └── hooks                      <- Directory for custom git hooks and other automation scripts.
│       ├── branch-name-check.sh   <- Hook script for checking branch names.
│       ├── commit-msg-check.sh    <- Hook script for checking commit messages.
│       ├── filename-check.sh      <- Hook script for checking file names.
│       ├── generate_docs.sh       <- Script for generating documentation.
│       └── restricted-file-check.sh   <- Hook script for checking restricted files.
├── src                            <- Source code for the project.
│   └── collaborativeaitoy  <- Main project module.
│       ├── __init__.py            <- Initializes the Python package.
│       ├── main.py                <- Entry point for the application.
│       ├── app.py                 <- Main application logic.
│       └── utils.py               <- Utility functions.
├── tests                          <- Directory for all project tests.
│   ├── integration                <- Integration tests.
│   └── spec                       <- Specification tests (unit tests).
├── .gitignore                     <- Specifies intentionally untracked files to ignore.
├── .pre-commit-config.yaml        <- Configuration for pre-commit hooks.
├── Dockerfile                     <- Dockerfile for containerizing the application.
├── Makefile                       <- Makefile with commands like `make data` or `make train`.
├── mkdocs.yml                     <- Configuration file for MkDocs, a static site generator for project documentation.
├── pyproject.toml                 <- Configuration file for Python projects which includes dependencies and package information.
├── README.md                      <- The top-level README for developers using this project.
└── .env                           <- Environment variables configuration file (not visible).
```

## Installation

### 1. Setting Up a Virtual Environment with Poetry

Create an isolated environment for your project using Poetry:

1. **Verify Python Version**: Confirm Poetry is set to the desired Python version with:

   ```zsh
   poetry env use 3.10.13
   ```

2. **Install Dependencies**: At your project root (where `pyproject.toml` is), run:

   ```shell
   poetry install
   ```

3. **Activate Environment**: Enter the environment with:

   ```shell
   poetry shell
   ```

4. **Check Installation**: Ensure all dependencies are installed:

   ```shell
   poetry show
   ```

5. **Environment Info**: Get detailed environment information:

   ```shell
   poetry env info
   ```

#### 4.2. Auto-Activate Poetry Environment in VS Code

To ensure that VS Code automatically uses your Poetry virtual
environment, especially when working remotely, follow these steps:

1. **Obtain the Virtual Environment Path**:
   - Open the VS Code terminal.
   - Retrieve the path to your Poetry-managed virtual environment by
     executing:

     ```bash
     poetry env info --path
     ```

   This command will provide the path to the virtual environment. Note
   this path as you will need it to configure the remote settings.

2. **Accessing Remote Settings in VS Code**:
   - Click the gear icon located on the bottom left corner of VS Code to
     open the Command Palette.
   - Go to `Settings`, then select `Remote [Environment]`, where
     `[Environment]` corresponds to your remote environment type (e.g.,
     Remote-SSH, Remote-Containers).
   - On the top right corner of the settings UI, click on the `{}` icon
     to open the `settings.json` file for remote settings.

3. **Create and Configure the Remote Settings JSON File**:
   - Based on the path obtained from the `poetry env info --path`
     command, you need to configure the `Remote settings.json` file in
     your VS Code environment. Use a generic placeholder for the path in
     this professional guide:

     ```json
     {
       "python.terminal.activateEnvInCurrentTerminal": true,
       "python.defaultInterpreterPath": "<Your-Virtual-Env-Path>",
       "ruff.args": [
           "--config=pyproject.toml",
           "--preview"
       ],
       "ruff.path": [
           "<Your-Virtual-Env-Path>/bin/ruff"
       ],
       "ruff.interpreter": [
           "<Your-Virtual-Env-Path>/bin/python"
       ]
     }
     ```

     - **`<Your-Virtual-Env-Path>`**: Replace this placeholder with the
       actual path to your virtual environment.
     - **`python.defaultInterpreterPath`**: Sets the Python interpreter
       to the one located in your virtual environment.
     - **`ruff.args`**: Includes all necessary command-line arguments
       for `ruff`.
     - **`ruff.path`** and **`ruff.interpreter`**: Make sure these paths
       point directly to the executables within your Poetry environment.

By implementing these steps, VS Code will automatically activate your
Poetry virtual environment whenever you open a terminal session in your
remote workspace, ensuring all Python executions and tool uses are
correctly configured for your environment.

### 2. Adding Extensions in VS Code

   1. **Find Extensions View**: Open the Extensions view by clicking the
      Extensions icon in the Sidebar or by pressing `Ctrl+Shift+X`.

   2. **Install Extensions**: Click the cloud icon with a download arrow
      at the bottom left to install extensions. Alternatively, you can
      search for the required extensions listed in the
      `.vscode/extensions.json` file.

   3. **Select Extensions**: Install the extensions specified in your
      project's `.vscode/extensions.json` file. This ensures your
      development environment is set up with the necessary tools.

   4. **Confirm Installation**: After selecting the extensions, confirm
      the installation and wait for the process to complete.

### 3. Updating CSpell Dictionary with Python Terms

Improve spell checking by adding Python library terms to CSpell:

```bash
make cspell_dictionary
```

This enriches CSpell's dictionary with terms from your project's
Python libraries, reducing false positives on technical jargon.

### 4. Set up your environment variables

Before contributing to the project, you need to set up your
environment variables to access different AWS resources. Follow
these steps:

Update the `.env` file with your settings:

Open the `.env` file in a text editor and add the necessary AWS
credentials and configuration details.

```sh
# Example content for .env file
AWS_ACCESS_KEY_ID=your_access_key_id
AWS_SECRET_ACCESS_KEY=your_secret_access_key
AWS_DEFAULT_REGION=your_default_region
```

### 5. Set up pre-commit hooks

To ensure code quality and consistency, we use pre-commit hooks for linting, formatting, generating documentation, and running tests. Follow these steps to set up pre-commit hooks:

a. **Install the pre-commit hooks**

```sh
pre-commit install
```

This command sets up the pre-commit hooks defined in the `.pre-commit-config.yaml` file. The hooks will now run automatically on every commit.

b. **Run all pre-commit hooks on all files**

```sh
pre-commit run --all-files
```

Expected output:

```plaintext
run tests................................................................Passed
black-formatter..........................................................Passed
black-jupyter-formatter..................................................Passed
ruff-linter..............................................................Passed
mypy.....................................................................Passed
trim trailing whitespace.................................................Passed
fix end of files.........................................................Passed
debug statements (python)................................................Passed
detect private key.......................................................Passed
check for added large files..............................................Passed
prettier.................................................................Passed
restricted file and section..............................................Passed
filename snake case......................................................Passed
generate documentation...................................................Passed
```

In the output above, "Passed" indicates that each pre-commit hook has successfully run.

By following these steps, you ensure that the codebase adheres to the project's coding standards and that any issues are caught early in the development process.

## Usage

### Running the Application

To run the main application, use:

```sh
python src/main.py
```

## Development

### Running Tests

To run all the tests, use the following
command

```sh
poetry run pytest
```

### Formatting, Linting & Type Checking

Use `black` for code formatting, `ruff` for linting, and `mypy` for type
checking:

```sh
poetry run black .
poetry run ruff check --preview --fix .
poetry run mypy .
```

To run all three commands for a single file:

```sh
poetry run black path/to/your/file.py
poetry run ruff check --preview --fix path/to/your/file.py
poetry run mypy path/to/your/file.py
```

Additionally, you can use `pre-commit` to run checks:

```sh
pre-commit run --all-files
pre-commit run --files path/to/your/file.py
```

⚠️ **Before pushing your changes to GitHub, ensure that all Python files
are formatted, linted, and type-checked.**

### Explanation

- **`poetry run black .`**: Formats your code to conform to the Black
  code style.
- **`poetry run ruff check --preview --fix .`**: Runs Ruff to check for
  linting issues and automatically fixes them.
- **`poetry run mypy .`**: Runs mypy to check for type errors in your
  code.
- **`poetry run black path/to/your/file.py`**: Formats the specified
  file to conform to the Black code style.
- **`poetry run ruff check --preview --fix path/to/your/file.py`**: Runs
  Ruff to check for linting issues in the specified file and
  automatically fixes them.
- **`poetry run mypy path/to/your/file.py`**: Runs mypy to check for
  type errors in the specified file.
- **`pre-commit run --all-files`**: Runs all configured `pre-commit`
  hooks on all files.
- **`pre-commit run --files path/to/your/file.py`**: Runs all configured
  `pre-commit` hooks on the specified file.

## Configuration

Configuration files are located in the `config` directory. Update these
files to suit your environment and requirements.

### Environment Variables

Environment variables are managed in the `.env` file. Update this file
with your specific settings.

## Contributing

We welcome contributions! Please read our
[CONTRIBUTING.md](.github/CONTRIBUTING.md) guide for more information on
how to contribute.

## Contact

For questions or comments, please open an issue on GitHub or contact the
project maintainers.
